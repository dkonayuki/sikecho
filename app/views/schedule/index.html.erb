<div id="schedule" class="clear">
	<div id="schedule-menu" class="col-sm-4 col-xs-12">
		<div class="filter-bar">
			<%= form_tag schedule_path, method: :get, class: 'filter-form', id: 'filter-schedule' do %>
		    <%= text_field_tag :search, params[:search], class: 'form-control', placeholder: 'ライブ検索', autocorrect: "off", autocapitalize: "off" %>
			<% end %>
		</div>

		<div id="schedule-sub-list">
			<%= render 'list_subjects_on_schedule' %>
		</div>
	</div>
	<div id="schedule-content" class="col-sm-8 col-xs-12">
		<h3>スケジュール</h3>
		<div id="schedule-table">
			<%= render partial: 'schedule_table', locals: { periods: @periods } %>
		</div>
	</div>
</div>

<script>
$(document).on("ready", function() {
	
	/*For live search*/
	var timeout; // add delay time

  $("#filter-schedule input").keyup(function() {
		window.clearTimeout(timeout); //clear delay
    timeout = window.setTimeout(function(){ //set a new delay, after an amount of time, ajax function will be called
		  $.ajax({
			  url: $("#filter-schedule").attr("action"),
			  data: $("#filter-schedule").serialize(), //default contenttype is url text
			  success: ajaxSuccess,
			  dataType: "script"
			});    
		}, 500);

		return false;
  });

});

</script>
